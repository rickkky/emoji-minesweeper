{"version":3,"sources":["components/Checkbox/index.tsx","containers/MineSweeper/Block.tsx","containers/MineSweeper/initGame.ts","containers/MineSweeper/index.tsx","containers/MineSweeper/spread.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["defaultProps","createDefaultProps","classBlock","defaultChecked","indeterminate","getProps","createPropsGetter","Checkbox","props","id","className","style","role","name","checked","disabled","autoFocus","inputRef","children","onChange","handleClick","onClick","handleFocus","onFocus","handleBlur","onBlur","useState","innerChecked","setInnerChecked","realChecked","containerClassName","combineClassNames","join","ref","type","e","target","nativeEvent","stopPropagation","preventDefault","isMarked","isFlipped","GameBlock","back","front","mark","handleMouseUp","onMouseUp","onContextMenu","initGame","rowNum","colNum","bombNum","Math","floor","Error","bombMap","total","i","push","length","ri","random","temp","shuffle","createBombMap","blockMap","j","index","count","flippedNum","markedNum","status","blank","bomb","boom","ongoing","completed","failed","hovered","numbers","MineSweeper","handleInit","setState","game","handleBlockMouseUp","row","col","state","button","handleBlockLeftClick","handleBlockRightClick","block","forceUpdate","spread","prevProps","prevState","this","innerProps","prevRowNum","prevColNum","prevBombNum","emoji","types","isEnded","rows","blocks","key","bind","renderStatusBar","renderGrid","Component","App","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.2749f7b0.chunk.js","sourcesContent":["import React, { useState } from 'react'\nimport createPropsGetter, {\n  createDefaultProps,\n  WithDefault,\n} from 'create-props-getter'\nimport combineClassNames from 'combine-class-names'\nimport './Checkbox.scss'\n\nexport interface CheckboxChangeEvent {\n  target: CheckboxInnerProps\n  nativeEvent: Event\n  stopPropagation: () => void\n  preventDefault: () => void\n}\n\nexport type CheckboxProps = Props\n\nexport interface CheckboxInnerProps\n  extends WithDefault<Props, typeof defaultProps> {\n  checked: boolean\n}\n\ninterface Props extends Partial<typeof defaultProps> {\n  id?: string\n  className?: string\n  style?: React.CSSProperties\n  checked?: boolean\n  role?: string\n  name?: string\n  disabled?: boolean\n  autoFocus?: boolean\n  inputRef?: React.RefObject<HTMLInputElement>\n  children?: React.ReactNode\n  onChange?: (e: CheckboxChangeEvent) => void\n  onClick?: (e: React.MouseEvent<HTMLInputElement>) => void\n  onFocus?: (e: React.FocusEvent<HTMLInputElement>) => void\n  onBlur?: (e: React.FocusEvent<HTMLInputElement>) => void\n}\n\nconst defaultProps = createDefaultProps({\n  classBlock: 'ric-checkbox',\n  defaultChecked: false,\n  indeterminate: false,\n})\n\nconst getProps = createPropsGetter(defaultProps)\n\nconst Checkbox: React.FC<Props> = (props: Props) => {\n  const {\n    id,\n    className,\n    classBlock,\n    style,\n    role,\n    name,\n    defaultChecked,\n    checked,\n    indeterminate,\n    disabled,\n    autoFocus,\n    inputRef,\n    children,\n    onChange,\n    onClick: handleClick,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n  } = getProps(props)\n\n  const [innerChecked, setInnerChecked] = useState(\n    indeterminate\n      ? true\n      : typeof checked === 'boolean'\n      ? checked\n      : defaultChecked,\n  )\n\n  const realChecked = indeterminate\n    ? true\n    : typeof checked === 'boolean'\n    ? checked\n    : innerChecked\n\n  const containerClassName = combineClassNames(\n    className || '',\n    `${classBlock}`,\n    {\n      [`${classBlock}--checked`]: realChecked,\n      [`${classBlock}--indeterminate`]: indeterminate,\n      [`${classBlock}--disabled`]: !!disabled,\n    },\n  ).join(' ')\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (disabled) {\n      return\n    }\n\n    if (!(typeof checked === 'boolean')) {\n      setInnerChecked(e.target.checked)\n    }\n\n    if (onChange) {\n      onChange({\n        target: {\n          ...getProps(props),\n          checked: e.target.checked,\n        },\n        nativeEvent: e.nativeEvent,\n        stopPropagation() {\n          e.stopPropagation()\n        },\n        preventDefault() {\n          e.preventDefault()\n        },\n      })\n    }\n  }\n\n  return (\n    <span className={containerClassName} style={style}>\n      <input\n        ref={inputRef}\n        id={id}\n        className={`${classBlock}__input`}\n        name={name}\n        type='checkbox'\n        checked={realChecked}\n        disabled={disabled}\n        autoFocus={autoFocus}\n        role={role}\n        onChange={handleChange}\n        onClick={handleClick}\n        onFocus={handleFocus}\n        onBlur={handleBlur}\n      />\n      <span className={`${classBlock}__inner`}>{children}</span>\n    </span>\n  )\n}\n\nCheckbox.defaultProps = defaultProps\n\nexport default Checkbox\n","import React from 'react'\nimport { createPropsGetter, createDefaultProps } from 'create-props-getter'\nimport './Block.scss'\nimport Checkbox from '../../components/Checkbox'\n\ntype Props = {\n  back: string\n  front: string\n  mark: string\n  onMouseUp?: (e: React.MouseEvent<HTMLSpanElement>) => void\n  onMouseEnter?: (e: React.MouseEvent<HTMLSpanElement>) => void\n  onMouseLeave?: (e: React.MouseEvent<HTMLSpanElement>) => void\n} & Partial<typeof defaultProps>\n\nconst defaultProps = createDefaultProps({\n  isMarked: false,\n  isFlipped: false,\n})\n\nconst getProps = createPropsGetter(defaultProps)\n\nconst GameBlock: React.FC<Props> = (props) => {\n  const {\n    isFlipped,\n    isMarked,\n    back,\n    front,\n    mark,\n    onMouseUp: handleMouseUp,\n  } = getProps(props)\n\n  return (\n    <span\n      className='mine-sweeper__block'\n      onMouseUp={handleMouseUp}\n      onContextMenu={(e) => e.preventDefault()}\n    >\n      <Checkbox\n        classBlock='mine-sweeper__checkbox'\n        indeterminate={isMarked}\n        checked={isFlipped}\n      >\n        {isMarked ? mark : isFlipped ? front : back}\n      </Checkbox>\n    </span>\n  )\n}\n\nGameBlock.defaultProps = defaultProps\n\nexport default GameBlock\n","type BlockType = -2 | -1 | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8\n\ninterface Block {\n  type: BlockType\n  isMarked: boolean\n  isFlipped: boolean\n}\n\nexport type Game = ReturnType<typeof initGame>\n\nexport default function initGame(\n  rowNum: number,\n  colNum: number,\n  bombNum: number,\n) {\n  rowNum = Math.floor(rowNum)\n  colNum = Math.floor(colNum)\n  bombNum = Math.floor(bombNum)\n\n  const total = rowNum * colNum\n\n  if (rowNum <= 0 || colNum <= 0 || bombNum <= 0 || bombNum > total) {\n    throw new Error('invalid game params')\n  }\n\n  const bombMap = createBombMap(rowNum, colNum, bombNum)\n  const blockMap = []\n\n  for (let i = 0; i < rowNum; ++i) {\n    for (let j = 0; j < colNum; ++j) {\n      const index = i * colNum + j\n\n      if (bombMap[index]) {\n        blockMap[index] = {\n          type: -1,\n          isMarked: false,\n          isFlipped: false,\n        }\n        continue\n      }\n\n      let count = 0\n\n      // left top\n      if (i > 0 && j > 0) {\n        count += bombMap[(i - 1) * colNum + j - 1] ? 1 : 0\n      }\n\n      // top\n      if (i > 0) {\n        count += bombMap[(i - 1) * colNum + j] ? 1 : 0\n      }\n\n      // right top\n      if (i > 0 && j < colNum - 1) {\n        count += bombMap[(i - 1) * colNum + j + 1] ? 1 : 0\n      }\n\n      // left\n      if (j > 0) {\n        count += bombMap[i * colNum + j - 1] ? 1 : 0\n      }\n\n      // right\n      if (j < colNum - 1) {\n        count += bombMap[i * colNum + j + 1] ? 1 : 0\n      }\n\n      // left bottom\n      if (i < rowNum - 1 && j > 0) {\n        count += bombMap[(i + 1) * colNum + j - 1] ? 1 : 0\n      }\n\n      // bottom\n      if (i < rowNum - 1) {\n        count += bombMap[(i + 1) * colNum + j] ? 1 : 0\n      }\n\n      // right bottom\n      if (i < rowNum - 1 && j < colNum - 1) {\n        count += bombMap[(i + 1) * colNum + j + 1] ? 1 : 0\n      }\n\n      blockMap[index] = {\n        type: count,\n        isMarked: false,\n        isFlipped: false,\n      }\n    }\n  }\n\n  return {\n    rowNum,\n    colNum,\n    bombNum,\n    bombMap,\n    blockMap: blockMap as Block[],\n    flippedNum: 0,\n    markedNum: 0,\n    status: 'ongoing' as 'ongoing' | 'completed' | 'failed',\n  }\n}\n\nfunction createBombMap(rowNum: number, colNum: number, bombNum: number) {\n  const total = rowNum * colNum\n\n  const bombMap = []\n\n  for (let i = 0; i < total; ++i) {\n    if (i < bombNum) {\n      bombMap.push(true)\n    } else {\n      bombMap.push(false)\n    }\n  }\n\n  shuffle(bombMap)\n\n  return bombMap\n}\n\nfunction shuffle(bombMap: boolean[]) {\n  const length = bombMap.length\n\n  for (let i = 0; i < bombMap.length; ++i) {\n    const ri = Math.floor(Math.random() * (length - 1))\n    const temp = bombMap[i]\n    bombMap[i] = bombMap[ri]\n    bombMap[ri] = temp\n  }\n}\n","import React, { Component } from 'react'\nimport { createPropsGetter, createDefaultProps } from 'create-props-getter'\nimport './MineSweeper.scss'\nimport MineSweeperBlock from './Block'\nimport initGame, { Game } from './initGame'\nimport spread from './spread'\n\ninterface State {\n  game: Game\n}\n\ntype Props = {} & Partial<typeof defaultProps>\n\nconst defaultProps = createDefaultProps({\n  back: '⬜',\n  blank: '◻️',\n  mark: '🚩',\n  bomb: '💣',\n  boom: '💥',\n  ongoing: '😀',\n  completed: '😎',\n  failed: '😵',\n  hovered: '😳',\n  rowNum: 10,\n  colNum: 10,\n  bombNum: 10,\n})\n\nconst getProps = createPropsGetter(defaultProps)\n\nconst classBlock = 'mine-sweeper'\n\nconst numbers = ['', '1️⃣', '2️⃣', '3️⃣', '4️⃣', '5️⃣', '6️⃣', '7️⃣', '8️⃣']\n\nexport default class MineSweeper extends Component<Props, State> {\n  static defaultProps = defaultProps\n\n  constructor(props: Props) {\n    super(props)\n\n    const { rowNum, colNum, bombNum } = getProps(props)\n\n    this.state = {\n      game: initGame(rowNum, colNum, bombNum),\n    }\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    const { rowNum, colNum, bombNum } = this.innerProps\n    const {\n      rowNum: prevRowNum,\n      colNum: prevColNum,\n      bombNum: prevBombNum,\n    } = getProps(prevProps)\n\n    if (\n      rowNum !== prevRowNum ||\n      colNum !== prevColNum ||\n      bombNum !== prevBombNum\n    ) {\n      this.handleInit(rowNum, colNum, bombNum)\n    }\n  }\n\n  handleInit = (rowNum: number, colNum: number, bombNum: number) => {\n    this.setState({\n      game: initGame(rowNum, colNum, bombNum),\n    })\n  }\n\n  handleBlockMouseUp = (row: number, col: number, e: React.MouseEvent) => {\n    const { game } = this.state\n\n    if (game.status !== 'ongoing') {\n      return\n    }\n\n    if (e.button === 0) {\n      this.handleBlockLeftClick(row, col, e)\n    } else if (e.button === 2) {\n      this.handleBlockRightClick(row, col, e)\n    }\n  }\n\n  handleBlockLeftClick = (row: number, col: number, e: React.MouseEvent) => {\n    const { game } = this.state\n    const { rowNum, colNum, bombNum, blockMap } = game\n    const index = row * colNum + col\n    const block = blockMap[index]\n\n    if (block.isFlipped || block.isMarked) {\n      return\n    }\n\n    if (block.type === -1) {\n      block.type = -2\n      game.status = 'failed'\n      this.forceUpdate()\n      return\n    }\n\n    spread(row, col, game)\n\n    if (game.flippedNum === rowNum * colNum - bombNum) {\n      game.status = 'completed'\n    }\n\n    this.forceUpdate()\n  }\n\n  handleBlockRightClick = (row: number, col: number, e: React.MouseEvent) => {\n    const { game } = this.state\n    const { colNum, blockMap } = game\n    const index = row * colNum + col\n    const block = blockMap[index]\n\n    if (block.isFlipped) {\n      return\n    }\n\n    block.isMarked = !block.isMarked\n    game.markedNum += block.isMarked ? 1 : -1\n\n    this.forceUpdate()\n  }\n\n  get innerProps() {\n    return getProps(this.props)\n  }\n\n  renderStatusBar() {\n    const { game } = this.state\n    const { status } = game\n    const {\n      rowNum,\n      colNum,\n      bombNum,\n      ongoing,\n      completed,\n      failed,\n      hovered,\n    } = this.innerProps\n    let emoji = ''\n\n    if (status === 'completed') {\n      emoji = completed\n    } else if (status === 'failed') {\n      emoji = failed\n    } else {\n      emoji = ongoing\n    }\n\n    return (\n      <div\n        className={`${classBlock}__status-bar`}\n        onClick={() => this.handleInit(rowNum, colNum, bombNum)}\n      >\n        <span className={`${classBlock}__status`}>{emoji}</span>\n        <span\n          className={`${classBlock}__status ${classBlock}__status--hovered`}\n        >\n          {hovered}\n        </span>\n      </div>\n    )\n  }\n\n  renderGrid() {\n    const { game } = this.state\n    const { blockMap, status } = game\n    const { rowNum, colNum, bomb, blank, back, mark, boom } = this.innerProps\n    const types: any = {\n      ...numbers,\n      [-2]: boom,\n      [-1]: bomb,\n      0: blank,\n    }\n    const isEnded = status !== 'ongoing'\n\n    const rows = []\n\n    for (let row = 0; row <= rowNum - 1; ++row) {\n      const blocks = []\n\n      for (let col = 0; col <= colNum - 1; ++col) {\n        const index = row * colNum + col\n        const block = blockMap[index]\n\n        if (isEnded) {\n          block.isFlipped = true\n\n          if (status === 'failed') {\n            block.isMarked = false\n          } else {\n            if (block.type === -1) {\n              block.isMarked = true\n            }\n          }\n        }\n\n        blocks.push(\n          <MineSweeperBlock\n            key={`${row}-${col}`}\n            back={back}\n            front={types[block.type]}\n            mark={mark}\n            isMarked={block.isMarked}\n            isFlipped={block.isFlipped}\n            onMouseUp={this.handleBlockMouseUp.bind(this, row, col)}\n          />,\n        )\n      }\n\n      rows.push(\n        <div key={`${row}`} className={`${classBlock}__row`}>\n          {blocks}\n        </div>,\n      )\n    }\n\n    return <div className={`${classBlock}__grid`}>{rows}</div>\n  }\n\n  render() {\n    return (\n      <div className={`${classBlock}`}>\n        {this.renderStatusBar()}\n        {this.renderGrid()}\n      </div>\n    )\n  }\n}\n","import { Game } from './initGame'\n\nexport default function spread(row: number, col: number, game: Game) {\n  const { rowNum, colNum, blockMap } = game\n  const block = blockMap[row * colNum + col]\n\n  if (block.isFlipped || block.type === -1) {\n    return\n  }\n\n  block.isFlipped = true\n  game.flippedNum += 1\n\n  if (block.isMarked) {\n    block.isMarked = false\n    game.markedNum -= 1\n  }\n\n  if (block.type !== 0) {\n    return\n  }\n\n  // left top\n  if (row > 0 && col > 0) {\n    spread(row - 1, col - 1, game)\n  }\n\n  // top\n  if (row > 0) {\n    spread(row - 1, col, game)\n  }\n\n  // right top\n  if (row > 0 && col < colNum - 1) {\n    spread(row - 1, col + 1, game)\n  }\n\n  // left\n  if (col > 0) {\n    spread(row, col - 1, game)\n  }\n\n  // right\n  if (col < colNum - 1) {\n    spread(row, col + 1, game)\n  }\n\n  // left bottom\n  if (row < rowNum - 1 && col > 0) {\n    spread(row + 1, col - 1, game)\n  }\n\n  // bottom\n  if (row < rowNum - 1) {\n    spread(row + 1, col, game)\n  }\n\n  // right bottom\n  if (row < rowNum - 1 && col < colNum - 1) {\n    spread(row + 1, col + 1, game)\n  }\n}\n","import React from 'react'\nimport './App.css'\nimport MineSweeper from './containers/MineSweeper'\n\nconst App: React.FC = () => {\n  return (\n    <div className='app'>\n      <MineSweeper />\n    </div>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}