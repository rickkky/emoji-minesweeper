(this["webpackJsonpemoji-minesweeper--react"]=this["webpackJsonpemoji-minesweeper--react"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(26)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(13),s=a.n(i),r=(a(21),a(22),a(2)),c=a(11),l=a(10),u=(a(23),Object(r.a)({children:"",isTwemoji:!0})),m=Object(r.b)(u),d=function(e){var t=m(e),a=t.children,i=t.key,s=[],r=0;return c.a.parse(a,{folder:"svg",ext:".svg",callback:function(e,t){return s.push(o.a.createElement("img",{key:"".concat(i||"","--").concat(++r),className:"emoji__twemoji",draggable:"false",alt:c.a.convert.fromCodePoint(e),src:"".concat(t.base).concat(t.size,"/").concat(e).concat(t.ext)})),""}}),o.a.createElement(n.Fragment,null,s)};d.defaultProps=u;var h=function(e){var t=m(e),a=t.className,n=t.children,i=t.isTwemoji,s=t.key,r=t.size;return o.a.createElement("span",{key:s,className:Object(l.a)(a||"","emoji",{"emoji--twemoji":i}).join(" "),style:r?{width:"".concat(r,"px"),height:"".concat(r,"px"),fontSize:"".concat(r,"px"),lineHeight:"".concat(r,"px")}:void 0,role:"img","aria-label":n},i?o.a.createElement(d,e):n)};h.defaultProps=u;var p=h,b=a(4),v=a(1),k=a(5),f=a(6),_=a(8),g=a(7),N=a(9);function j(e,t,a){e=Math.floor(e),t=Math.floor(t),a=Math.floor(a);var n=e*t;if(e<=0||t<=0||a<=0||a>n)throw new Error("invalid game params");return{rowNum:e,colNum:t,bombNum:a,totalNum:n,blockMap:void 0,flippedNum:0,markedNum:0,stepNum:0,time:0,status:"ongoing"}}function w(e){for(var t=e.rowNum,a=e.colNum,n=function(e){for(var t=e.colNum,a=e.bombNum,n=e.totalNum,o=e.seedRow,i=e.seedCol,s=[],r=0;r<n;++r)r<a?s.push(!0):s.push(!1);for(var c=0;c<n;++c){var l=Math.floor(Math.random()*(n-1)),u=s[c];s[c]=s[l],s[l]=u}for(var m=o*t+i,d=m;d!==m-1;++d){if(!s[d])return s[d]=!0,s[m]=!1,s;d>=n-1&&(d=-1)}return s}(e),o=[],i=0;i<t;++i)for(var s=0;s<a;++s){var r=i*a+s;if(n[r])o[r]={type:-1,isMarked:!1,isFlipped:!1};else{var c=0;i>0&&s>0&&(c+=n[(i-1)*a+s-1]?1:0),i>0&&(c+=n[(i-1)*a+s]?1:0),i>0&&s<a-1&&(c+=n[(i-1)*a+s+1]?1:0),s>0&&(c+=n[i*a+s-1]?1:0),s<a-1&&(c+=n[i*a+s+1]?1:0),i<t-1&&s>0&&(c+=n[(i+1)*a+s-1]?1:0),i<t-1&&(c+=n[(i+1)*a+s]?1:0),i<t-1&&s<a-1&&(c+=n[(i+1)*a+s+1]?1:0),o[r]={type:c,isMarked:!1,isFlipped:!1}}}return o}var M=Object(n.createContext)(!0),O=function(){},E=Object(r.a)({onClick:O}),y=Object(r.b)(E),F=function(e){var t=y(e),a=t.classBlock,n=t.ongoing,i=t.completed,s=t.failed,r=t.frightened,c=t.hovered,l=t.status,u=t.isFrightened,m=t.onClick,d="";return"completed"===l?d=i:"failed"===l?d=s:(d=n,u&&(d=r)),o.a.createElement(M.Consumer,null,(function(e){return o.a.createElement("div",{className:"".concat(a,"__header"),onClick:m},o.a.createElement(p,{className:"".concat(a,"__status"),isTwemoji:e},d),o.a.createElement(p,{className:"".concat(a,"__status ").concat(a,"__status--hovered"),isTwemoji:e},c))}))};F.defaultProps=E;var T=F,B=a(3),C=a(15),x=(a(24),Object(r.a)({classBlock:"ric-checkbox",defaultChecked:!1,indeterminate:!1})),S=Object(r.b)(x),P=function(e){var t,a=S(e),i=a.id,s=a.className,r=a.classBlock,c=a.style,u=a.role,m=a.name,d=a.defaultChecked,h=a.checked,p=a.indeterminate,b=a.disabled,k=a.autoFocus,f=a.inputRef,_=a.children,g=a.onChange,N=a.onClick,j=a.onFocus,w=a.onBlur,M=Object(n.useState)(!!p||("boolean"===typeof h?h:d)),O=Object(C.a)(M,2),E=O[0],y=O[1],F=!!p||("boolean"===typeof h?h:E),T=Object(l.a)(s||"","".concat(r),(t={},Object(B.a)(t,"".concat(r,"--checked"),F),Object(B.a)(t,"".concat(r,"--indeterminate"),p),Object(B.a)(t,"".concat(r,"--disabled"),!!b),t)).join(" ");return o.a.createElement("span",{className:T,style:c},o.a.createElement("input",{ref:f,id:i,className:"".concat(r,"__input"),name:m,type:"checkbox",checked:F,disabled:b,autoFocus:k,role:u,onChange:function(t){b||("boolean"!==typeof h&&y(t.target.checked),g&&g({target:Object(v.a)({},S(e),{checked:t.target.checked}),nativeEvent:t.nativeEvent,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}}))},onClick:N,onFocus:j,onBlur:w}),o.a.createElement("span",{className:"".concat(r,"__inner")},_))};P.defaultProps=x;var U=P,D=Object(r.a)({isMarked:!1,isFlipped:!1}),L=Object(r.b)(D),I=function(e){var t=L(e),a=t.classBlock,n=t.isFlipped,i=t.isMarked,s=t.back,r=t.front,c=t.mark,l=t.onMouseUp,u=t.onContextMenu,m=t.onMouseEnter,d=t.onMouseLeave;return o.a.createElement(M.Consumer,null,(function(e){return o.a.createElement("span",{className:"".concat(a,"__block"),onMouseUp:l,onContextMenu:u,onMouseEnter:m,onMouseLeave:d},o.a.createElement(U,{classBlock:"".concat(a,"__checkbox"),indeterminate:i,checked:n},o.a.createElement(p,{isTwemoji:e},i?c:n?r:s)))}))};I.defaultProps=D;var R=I,z=Object(r.a)({onMouseUp:O,onContextMenu:O,onMouseEnter:O,onMouseLeave:O}),H=Object(r.b)(z),G=["","1\ufe0f\u20e3","2\ufe0f\u20e3","3\ufe0f\u20e3","4\ufe0f\u20e3","5\ufe0f\u20e3","6\ufe0f\u20e3","7\ufe0f\u20e3","8\ufe0f\u20e3"],J=function(e){function t(){return Object(k.a)(this,t),Object(_.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){for(var e,t=this.innerProps,a=t.classBlock,n=t.back,i=t.blank,s=t.mark,r=t.bomb,c=t.boom,l=t.rowNum,u=t.colNum,m=t.status,d=t.blockMap,h=t.onMouseUp,p=t.onContextMenu,b=t.onMouseEnter,k=t.onMouseLeave,f=Object(v.a)({},G,(e={},Object(B.a)(e,-2,c),Object(B.a)(e,-1,r),Object(B.a)(e,0,i),e)),_=[],g=0;g<=l-1;++g){for(var N=[],j=0;j<=u-1;++j)if(d){var w=d[g*u+j];"ongoing"!==m&&(w.isFlipped=!0,"completed"===m?-1===w.type&&(w.isMarked=!0):w.isMarked=!1),N.push(o.a.createElement(R,{key:"".concat(g,"-").concat(j),classBlock:a,back:n,front:f[w.type],mark:s,isMarked:w.isMarked,isFlipped:w.isFlipped,onMouseUp:h.bind(void 0,g,j),onContextMenu:p.bind(void 0,g,j),onMouseEnter:b.bind(void 0,g,j),onMouseLeave:k.bind(void 0,g,j)}))}else N.push(o.a.createElement(R,{key:"".concat(g,"-").concat(j),classBlock:a,back:n,front:n,mark:s,isMarked:!1,isFlipped:!1,onMouseUp:h.bind(void 0,g,j),onMouseEnter:b.bind(void 0,g,j),onMouseLeave:k.bind(void 0,g,j)}));_.push(o.a.createElement("div",{key:"".concat(g),className:"".concat(a,"__row")},N))}return o.a.createElement("div",{className:"".concat(a,"__grid")},_)}},{key:"innerProps",get:function(){return H(this.props)}}]),t}(n.PureComponent);J.defaultProps=z;var W=function(e){function t(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(k.a)(this,t),(e=Object(_.a)(this,Object(g.a)(t).call(this)))._interval=64,e._maxTime=void 0,e._time=0,e._timeFlags=[],e._startTime=0,e._restartTime=0,e._endTime=0,e._timeBase=0,e._status="stopped",e._resolve=void 0,e._timeout=void 0,e._tick=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("ticking"===e._status){var a=Date.now(),n=e._timeBase+a-e._restartTime;t&&e._timeFlags.push(n),e.emit("tick",{time:n,timeFlags:Object(b.a)(e._timeFlags),startTime:e._startTime}),e._time=n,e._endTime=a,e._maxTime&&n>=e._maxTime&&e.stop()}},a.interval&&(e.interval=a.interval),e}return Object(N.a)(t,e),Object(f.a)(t,[{key:"start",value:function(e){var t=this;if("stopped"!==this._status)return Promise.reject({message:"stopwatch should start when stopped"});e&&(this.interval=e);var a=Date.now();return this._time=0,this._timeFlags=[],this._startTime=a,this._restartTime=a,this._endTime=a,this._timeBase=0,this._timeout=setInterval(this._tick,this._interval),this._setStatus("ticking"),new Promise((function(e,a){t._resolve=e}))}},{key:"stop",value:function(){"stopped"!==this._status&&(void 0!==this._timeout&&(clearInterval(this._timeout),this._timeout=void 0),this._resolve&&(this._resolve({time:this._time,timeFlags:[].concat(Object(b.a)(this._timeFlags),[this._time]),startTime:this._startTime,endTime:this._endTime,isOvertime:!!(this._maxTime&&this._time>=this._maxTime)}),this._resolve=void 0),this._time=0,this._timeFlags=[],this._startTime=0,this._restartTime=0,this._endTime=0,this._timeBase=0,this._setStatus("stopped"))}},{key:"pause",value:function(){"ticking"===this._status&&(void 0!==this._timeout&&(clearInterval(this._timeout),this._timeout=void 0),this._timeBase+=Date.now()-this._restartTime,this._setStatus("paused"))}},{key:"resume",value:function(e){"paused"===this._status&&(e&&(this.interval=e),this._timeout=setInterval(this._tick,this._interval),this._restartTime=Date.now())}},{key:"_setStatus",value:function(e){if(e!==this._status){var t=this._status;this._status=e,this.emit("status-change",{status:e,prevStatus:t})}}},{key:"interval",get:function(){return this._interval},set:function(e){e<=0||(this._interval=e,void 0!==this._timeout&&(clearInterval(this._timeout),this._timeout=setInterval(this._tick,this._interval)))}},{key:"maxTime",get:function(){return this._maxTime},set:function(e){"number"===typeof e&&e<=this._interval||(this._maxTime=e)}},{key:"time",get:function(){return this._time}},{key:"timeFlags",get:function(){return Object(b.a)(this._timeFlags)}},{key:"startTime",get:function(){return this._startTime}},{key:"restartTime",get:function(){return this._restartTime}},{key:"status",get:function(){return this._status}}]),t}(a(14).a),$=Object(r.a)({back:"\u2b1c",blank:"\u25fb\ufe0f",mark:"\ud83d\udea9",bomb:"\ud83d\udca3",boom:"\ud83d\udca5",ongoing:"\ud83d\ude00",completed:"\ud83d\ude0e",failed:"\ud83d\ude35",frightened:"\ud83d\ude2c",hovered:"\ud83d\ude36",rowNum:10,colNum:10,bombNum:10,twemojiEnabled:!0}),q=Object(r.b)($),A=function(e){function t(e){var a;Object(k.a)(this,t),(a=Object(_.a)(this,Object(g.a)(t).call(this,e))).containerRef=Object(n.createRef)(),a.stopwatch=void 0,a.handleHeaderClick=function(){var e=a.innerProps,t=e.rowNum,n=e.colNum,o=e.bombNum;a.setState(Object(v.a)({},j(t,n,o))),a.stopwatch.stop()},a.handleBlockSpread=function(e){e.isFlipped=!0,a.setState((function(e){return Object(v.a)({},e,{flippedNum:e.flippedNum+1})})),e.isMarked&&(e.isMarked=!1,a.setState((function(e){return Object(v.a)({},e,{markedNum:e.markedNum-1})})))},a.handleStopwatchTick=function(e){a.setState({time:e.time})},a.handleBlockMouseUp=function(e,t,n){if(0===n.button){var o,i=a.state,s=i.rowNum,r=i.colNum,c=i.bombNum,l=i.totalNum,u=i.status,m=i.stepNum;a.state.blockMap?o=a.state.blockMap:(o=w({rowNum:s,colNum:r,bombNum:c,totalNum:l,seedRow:e,seedCol:t}),a.setState({blockMap:o}),a.stopwatch.start());var d=o[e*r+t];if("ongoing"===u&&!d.isFlipped&&!d.isMarked){if(a.setState({isFrightened:!1,stepNum:m+1}),-1===d.type)return d.type=-2,a.setState({status:"failed"}),void a.stopwatch.stop();!function e(t){var a=t.rowNum,n=t.colNum,o=t.blockMap,i=t.row,s=t.col,r=t.handler,c=o[i*n+s];c.isFlipped||-1===c.type||(r(c),0===c.type&&(i>0&&s>0&&e(Object(v.a)({},t,{row:i-1,col:s-1})),i>0&&e(Object(v.a)({},t,{row:i-1,col:s})),i>0&&s<n-1&&e(Object(v.a)({},t,{row:i-1,col:s+1})),s>0&&e(Object(v.a)({},t,{row:i,col:s-1})),s<n-1&&e(Object(v.a)({},t,{row:i,col:s+1})),i<a-1&&s>0&&e(Object(v.a)({},t,{row:i+1,col:s-1})),i<a-1&&e(Object(v.a)({},t,{row:i+1,col:s})),i<a-1&&s<n-1&&e(Object(v.a)({},t,{row:i+1,col:s+1}))))}({rowNum:s,colNum:r,blockMap:o,row:e,col:t,handler:a.handleBlockSpread}),a.setState((function(e){return Object(v.a)({},e,{blockMap:Object(b.a)(o)})}))}}},a.handleBlockContextMenu=function(e,t,n){var o=a.state,i=o.colNum,s=o.blockMap,r=o.markedNum,c=o.status;if(s){var l=s[e*i+t];"ongoing"!==c||l.isFlipped||(l.isMarked=!l.isMarked,a.setState({markedNum:r+(l.isMarked?1:-1),blockMap:Object(b.a)(s),isFrightened:!1}))}},a.handleBlockMouseEnter=function(e,t,n){var o=a.state,i=o.colNum,s=o.blockMap;if(s){var r=s[e*i+t];r.isFlipped||r.isMarked||a.setState({isFrightened:!0})}else a.setState({isFrightened:!0})},a.handleBlockMouseLeave=function(e,t,n){a.setState({isFrightened:!1})};var o=a.innerProps,i=o.rowNum,s=o.colNum,r=o.bombNum;return a.state=Object(v.a)({},j(i,s,r),{isFrightened:!1}),a.stopwatch=new W,a.stopwatch.on("tick",a.handleStopwatchTick),a}return Object(N.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this.innerProps,n=a.rowNum,o=a.colNum,i=a.bombNum,s=q(e),r=s.rowNum,c=s.colNum,l=s.bombNum;if(n===r&&o===c&&i===l)return"ongoing"===this.state.status&&this.state.flippedNum===this.state.totalNum-this.state.bombNum?(this.setState({status:"completed"}),void this.stopwatch.stop()):void 0;this.setState(Object(v.a)({},j(n,o,i)))}},{key:"renderHeader",value:function(){var e=this.innerProps,t=e.ongoing,a=e.completed,n=e.failed,i=e.frightened,s=e.hovered;return o.a.createElement(T,{classBlock:"minesweeper",ongoing:t,completed:a,failed:n,frightened:i,hovered:s,status:this.state.status,isFrightened:this.state.isFrightened,onClick:this.handleHeaderClick})}},{key:"renderGrid",value:function(){var e=this.innerProps,t=this.state,a=t.rowNum,n=t.colNum,i=t.blockMap,s=t.status,r={classBlock:"minesweeper",back:e.back,blank:e.blank,mark:e.mark,bomb:e.bomb,boom:e.boom,rowNum:a,colNum:n,blockMap:i,status:s};return o.a.createElement(J,Object.assign({},r,{onMouseUp:this.handleBlockMouseUp,onContextMenu:this.handleBlockContextMenu,onMouseEnter:this.handleBlockMouseEnter,onMouseLeave:this.handleBlockMouseLeave}))}},{key:"renderFooter",value:function(){var e=this.state,t=e.markedNum,a=e.stepNum,n=e.time,i=this.innerProps.bombNum;return o.a.createElement("div",{className:"".concat("minesweeper","__footer")},o.a.createElement("div",{className:"".concat("minesweeper","__bomb-counter")},o.a.createElement("span",null,i-t," / ",i),o.a.createElement("span",null,"BOMBS")),o.a.createElement("div",{className:"".concat("minesweeper","__step-counter")},o.a.createElement("span",null,a),o.a.createElement("span",null,"STEPS")),o.a.createElement("div",{className:"".concat("minesweeper","__time-counter")},o.a.createElement("span",null,(n/1e3).toFixed(3)),o.a.createElement("span",null,"TIME")))}},{key:"render",value:function(){var e=this.innerProps.twemojiEnabled;return o.a.createElement(M.Provider,{value:e},o.a.createElement("div",{ref:this.containerRef,className:"".concat("minesweeper"),onContextMenu:function(e){return e.preventDefault()}},this.renderHeader(),this.renderGrid(),this.renderFooter()))}},{key:"innerProps",get:function(){return q(this.props)}}]),t}(n.Component);A.defaultProps=$;a(25);var K=A,Q=function(){return o.a.createElement("div",{className:"app"},o.a.createElement("div",{className:"app__content"},o.a.createElement(K,null)),o.a.createElement("div",{className:"app__footer"},o.a.createElement("a",{href:"https://github.com/rickkky/emoji-minesweeper--react",rel:"noopener noreferrer",target:"_blank"},o.a.createElement(p,{size:20},"\ud83e\udd13"),o.a.createElement("span",null,"\xa0 SOURCE CODE \xa0"),o.a.createElement(p,{size:20},"\ud83e\udd13"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[16,1,2]]]);
//# sourceMappingURL=main.5f28f014.chunk.js.map