(this["webpackJsonpemoji-minesweeper--react"]=this["webpackJsonpemoji-minesweeper--react"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){e.exports=n(23)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(5),c=n.n(r),s=(n(18),n(19),n(6)),i=n(7),u=n(11),l=n(8),m=n(12),d=n(1);n(20);function p(e,t,n){if(e=Math.floor(e),t=Math.floor(t),n=Math.floor(n),e<=0||t<=0||n<=0||n>e*t)throw new Error("invalid game params");for(var a=function(e,t,n){for(var a=e*t,o=[],r=0;r<a;++r)r<n?o.push(!0):o.push(!1);return function(e){for(var t=e.length,n=0;n<e.length;++n){var a=Math.floor(Math.random()*(t-1)),o=e[n];e[n]=e[a],e[a]=o}}(o),o}(e,t,n),o=[],r=0;r<e;++r)for(var c=0;c<t;++c){var s=r*t+c;if(a[s])o[s]={type:-1,isMarked:!1,isFlipped:!1};else{var i=0;r>0&&c>0&&(i+=a[(r-1)*t+c-1]?1:0),r>0&&(i+=a[(r-1)*t+c]?1:0),r>0&&c<t-1&&(i+=a[(r-1)*t+c+1]?1:0),c>0&&(i+=a[r*t+c-1]?1:0),c<t-1&&(i+=a[r*t+c+1]?1:0),r<e-1&&c>0&&(i+=a[(r+1)*t+c-1]?1:0),r<e-1&&(i+=a[(r+1)*t+c]?1:0),r<e-1&&c<t-1&&(i+=a[(r+1)*t+c+1]?1:0),o[s]={type:i,isMarked:!1,isFlipped:!1}}}return{rowNum:e,colNum:t,bombNum:n,bombMap:a,blockMap:o,flippedNum:0,markedNum:0,stepNum:0,status:"ongoing"}}var b=n(2),k=n(3),f=(n(21),n(10)),h=n(9),v=(n(22),Object(d.a)({classBlock:"ric-checkbox",defaultChecked:!1,indeterminate:!1})),M=Object(d.c)(v),N=function(e){var t,n=M(e),r=n.id,c=n.className,s=n.classBlock,i=n.style,u=n.role,l=n.name,m=n.defaultChecked,d=n.checked,p=n.indeterminate,v=n.disabled,N=n.autoFocus,g=n.inputRef,w=n.children,E=n.onChange,j=n.onClick,_=n.onFocus,O=n.onBlur,y=Object(a.useState)(!!p||("boolean"===typeof d?d:m)),F=Object(f.a)(y,2),B=F[0],C=F[1],x=!!p||("boolean"===typeof d?d:B),P=Object(h.a)(c||"","".concat(s),(t={},Object(b.a)(t,"".concat(s,"--checked"),x),Object(b.a)(t,"".concat(s,"--indeterminate"),p),Object(b.a)(t,"".concat(s,"--disabled"),!!v),t)).join(" ");return o.a.createElement("span",{className:P,style:i},o.a.createElement("input",{ref:g,id:r,className:"".concat(s,"__input"),name:l,type:"checkbox",checked:x,disabled:v,autoFocus:N,role:u,onChange:function(t){v||("boolean"!==typeof d&&C(t.target.checked),E&&E({target:Object(k.a)({},M(e),{checked:t.target.checked}),nativeEvent:t.nativeEvent,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}}))},onClick:j,onFocus:_,onBlur:O}),o.a.createElement("span",{className:"".concat(s,"__inner")},w))};N.defaultProps=v;var g=N,w=Object(d.a)({isMarked:!1,isFlipped:!1}),E=Object(d.b)(w),j=function(e){var t=E(e),n=t.isFlipped,a=t.isMarked,r=t.back,c=t.front,s=t.mark,i=t.onMouseUp,u=t.onContextMenu,l=t.onMouseEnter,m=t.onMouseLeave;return o.a.createElement("span",{className:"mine-sweeper__block",onMouseUp:i,onContextMenu:u,onMouseEnter:l,onMouseLeave:m},o.a.createElement(g,{classBlock:"mine-sweeper__checkbox",indeterminate:a,checked:n},a?s:n?c:r))};j.defaultProps=w;var _=j,O=function(){},y=Object(d.a)({back:"\u2b1c",blank:"\u25fb\ufe0f",mark:"\ud83d\udea9",bomb:"\ud83d\udca3",boom:"\ud83d\udca5",rowNum:10,colNum:10,bombNum:10,status:"ongoing",onMouseUp:O,onContextMenu:O,onMouseEnter:O,onMouseLeave:O}),F=Object(d.b)(y),B=["","1\ufe0f\u20e3","2\ufe0f\u20e3","3\ufe0f\u20e3","4\ufe0f\u20e3","5\ufe0f\u20e3","6\ufe0f\u20e3","7\ufe0f\u20e3","8\ufe0f\u20e3"],C=function(e){var t,n=F(e),a=n.back,r=n.blank,c=n.mark,s=n.bomb,i=n.boom,u=n.rowNum,l=n.colNum,m=n.blockMap,d=n.status,p=n.onMouseUp,f=n.onContextMenu,h=n.onMouseEnter,v=n.onMouseLeave,M=Object(k.a)({},B,(t={},Object(b.a)(t,-2,i),Object(b.a)(t,-1,s),Object(b.a)(t,0,r),t)),N=[];if(!m)return o.a.createElement("div",null);for(var g=0;g<=u-1;++g){for(var w=[],E=0;E<=l-1;++E){var j=m[g*l+E];"ongoing"!==d&&(j.isFlipped=!0,"completed"===d?-1===j.type&&(j.isMarked=!0):j.isMarked=!1),w.push(o.a.createElement(_,{key:"".concat(g,"-").concat(E),back:a,front:M[j.type],mark:c,isMarked:j.isMarked,isFlipped:j.isFlipped,onMouseUp:p.bind(void 0,g,E),onContextMenu:f.bind(void 0,g,E),onMouseEnter:h.bind(void 0,g,E),onMouseLeave:v.bind(void 0,g,E)}))}N.push(o.a.createElement("div",{key:"".concat(g),className:"".concat("mine-sweeper","__row")},w))}return o.a.createElement("div",{className:"".concat("mine-sweeper","__grid")},N)};C.defaultProps=y;var x=C,P=Object(d.a)({back:"\u2b1c",blank:"\u25fb\ufe0f",mark:"\ud83d\udea9",bomb:"\ud83d\udca3",boom:"\ud83d\udca5",ongoing:"\ud83d\ude00",completed:"\ud83d\ude0e",failed:"\ud83d\ude35",frightened:"\ud83d\ude2c",hovered:"\ud83d\ude36",rowNum:10,colNum:10,bombNum:10}),U=Object(d.b)(P),L=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleInit=function(e,t,a){n.setState({game:p(e,t,a)})},n.handleBlockMouseUp=function(e,t,a){var o=n.state.game,r=o.rowNum,c=o.colNum,s=o.bombNum,i=o.blockMap[e*c+t];if("ongoing"===o.status&&!i.isFlipped&&!i.isMarked&&(n.setState({isFrigthened:!1}),0===a.button)){if(o.stepNum+=1,-1===i.type)return i.type=-2,o.status="failed",void n.forceUpdate();!function e(t,n,a){var o=a.rowNum,r=a.colNum,c=a.blockMap[t*r+n];c.isFlipped||-1===c.type||(c.isFlipped=!0,a.flippedNum+=1,c.isMarked&&(c.isMarked=!1,a.markedNum-=1),0===c.type&&(t>0&&n>0&&e(t-1,n-1,a),t>0&&e(t-1,n,a),t>0&&n<r-1&&e(t-1,n+1,a),n>0&&e(t,n-1,a),n<r-1&&e(t,n+1,a),t<o-1&&n>0&&e(t+1,n-1,a),t<o-1&&e(t+1,n,a),t<o-1&&n<r-1&&e(t+1,n+1,a)))}(e,t,o),o.flippedNum===r*c-s&&(o.status="completed"),n.forceUpdate()}},n.handleBlockContextMenu=function(e,t,a){var o=n.state.game,r=o.colNum,c=o.blockMap[e*r+t];"ongoing"!==o.status||c.isFlipped||(c.isMarked=!c.isMarked,o.markedNum+=c.isMarked?1:-1,n.forceUpdate())},n.handleBlockMouseEnter=function(e,t,a){var o=n.state.game,r=o.colNum,c=o.blockMap[e*r+t];c.isFlipped||c.isMarked||n.setState({isFrigthened:!0})},n.handleBlockMouseLeave=function(e,t,a){n.setState({isFrigthened:!1})};var a=U(e),o=a.rowNum,r=a.colNum,c=a.bombNum;return n.state={game:p(o,r,c),isFrigthened:!1},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e,t){var n=this.innerProps,a=n.rowNum,o=n.colNum,r=n.bombNum,c=U(e),s=c.rowNum,i=c.colNum,u=c.bombNum;a===s&&o===i&&r===u||this.handleInit(a,o,r)}},{key:"renderHeader",value:function(){var e=this,t=this.state,n=t.game,a=t.isFrigthened,r=n.status,c=this.innerProps,s=c.rowNum,i=c.colNum,u=c.bombNum,l=c.ongoing,m=c.completed,d=c.failed,p=c.frightened,b=c.hovered,k="";return"completed"===r?k=m:"failed"===r?k=d:(k=l,a&&(k=p)),o.a.createElement("div",{className:"".concat("mine-sweeper","__header"),onClick:function(){return e.handleInit(s,i,u)}},o.a.createElement("span",{className:"".concat("mine-sweeper","__status")},k),o.a.createElement("span",{className:"".concat("mine-sweeper","__status ").concat("mine-sweeper","__status--hovered")},b))}},{key:"renderGrid",value:function(){var e=this.innerProps,t=e.back,n=e.blank,a=e.mark,r=e.bomb,c=e.boom,s=e.rowNum,i=e.colNum,u=this.state.game,l=u.blockMap,m=u.status;return o.a.createElement(x,{back:t,blank:n,mark:a,bomb:r,boom:c,rowNum:s,colNum:i,blockMap:l,status:m,onMouseUp:this.handleBlockMouseUp,onContextMenu:this.handleBlockContextMenu,onMouseEnter:this.handleBlockMouseEnter,onMouseLeave:this.handleBlockMouseLeave})}},{key:"renderFooter",value:function(){var e=this.state.game,t=e.markedNum,n=e.stepNum,a=this.innerProps.bombNum;return o.a.createElement("div",{className:"".concat("mine-sweeper","__footer")},o.a.createElement("div",{className:"".concat("mine-sweeper","__bomb-counter")},o.a.createElement("span",null,a-t," / ",a),o.a.createElement("span",null,"BOMBS")),o.a.createElement("div",{className:"".concat("mine-sweeper","__step-counter")},o.a.createElement("span",null,n),o.a.createElement("span",null,"STEPS")))}},{key:"render",value:function(){return o.a.createElement("div",{className:"".concat("mine-sweeper"),onContextMenu:function(e){return e.preventDefault()}},this.renderHeader(),this.renderGrid(),this.renderFooter())}},{key:"innerProps",get:function(){return U(this.props)}}]),t}(a.Component);L.defaultProps=P;var S=function(){return o.a.createElement("div",{className:"app"},o.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[13,1,2]]]);
//# sourceMappingURL=main.e6adab7e.chunk.js.map