(this["webpackJsonpemoji-minesweeper--react"]=this["webpackJsonpemoji-minesweeper--react"]||[]).push([[0],{15:function(t,e,a){t.exports=a(24)},20:function(t,e,a){},21:function(t,e,a){},22:function(t,e,a){},23:function(t,e,a){},24:function(t,e,a){"use strict";a.r(e);var i=a(0),s=a.n(i),n=a(11),r=a.n(n),o=(a(20),a(21),a(1)),m=a(9),u=a(12),c=(a(22),Object(o.a)({children:"",isTwemoji:!0})),h=Object(o.b)(c),l=function(t){var e=h(t).children,a=[],n=0;return m.a.parse(e,{folder:"svg",ext:".svg",callback:function(t,e){return a.push(s.a.createElement("img",{key:n++,className:"emoji__twemoji",draggable:"false",alt:m.a.convert.fromCodePoint(t),src:"".concat(e.base).concat(e.size,"/").concat(t).concat(e.ext)})),""}}),s.a.createElement(i.Fragment,null,a)};l.defaultProps=c;var _=function(t){var e=h(t),a=e.className,i=e.children,n=e.isTwemoji,r=e.size;return s.a.createElement("span",{className:Object(u.a)(a||"","emoji",{"emoji--twemoji":n}),style:r?{width:"".concat(r,"px"),height:"".concat(r,"px"),fontSize:"".concat(r,"px"),lineHeight:"".concat(r,"px")}:void 0,role:"img","aria-label":i},n?s.a.createElement(l,t):i)};_.defaultProps=c;var d=_,b=a(2),p=a(3),v=a(5),f=a(4),k=a(6),N=a(7),g=a(8),y=function(t){function e(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(b.a)(this,e),(t=Object(v.a)(this,Object(f.a)(e).call(this)))._interval=64,t._maxTime=void 0,t._time=0,t._timeFlags=[],t._startTime=0,t._restartTime=0,t._endTime=0,t._timeBase=0,t._status="stopped",t._resolve=void 0,t._timeout=void 0,t._tick=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("ticking"===t._status){var a=Date.now(),i=t._timeBase+a-t._restartTime;e&&t._timeFlags.push(i),t.emit("tick",{time:i,timeFlags:Object(N.a)(t._timeFlags),startTime:t._startTime}),t._time=i,t._endTime=a,t._maxTime&&i>=t._maxTime&&t.stop()}},a.interval&&(t.interval=a.interval),t}return Object(k.a)(e,t),Object(p.a)(e,[{key:"start",value:function(t){var e=this;if("stopped"!==this._status)return Promise.reject({message:"stopwatch should start when stopped"});t&&(this.interval=t);var a=Date.now();return this._time=0,this._timeFlags=[],this._startTime=a,this._restartTime=a,this._endTime=a,this._timeBase=0,this._timeout=setInterval(this._tick,this._interval),this._setStatus("ticking"),new Promise((function(t,a){e._resolve=t}))}},{key:"stop",value:function(){"stopped"!==this._status&&(void 0!==this._timeout&&(clearInterval(this._timeout),this._timeout=void 0),this._resolve&&(this._resolve({time:this._time,timeFlags:[].concat(Object(N.a)(this._timeFlags),[this._time]),startTime:this._startTime,endTime:this._endTime,isOvertime:!!(this._maxTime&&this._time>=this._maxTime)}),this._resolve=void 0),this._time=0,this._timeFlags=[],this._startTime=0,this._restartTime=0,this._endTime=0,this._timeBase=0,this._setStatus("stopped"))}},{key:"pause",value:function(){"ticking"===this._status&&(void 0!==this._timeout&&(clearInterval(this._timeout),this._timeout=void 0),this._timeBase+=Date.now()-this._restartTime,this._setStatus("paused"))}},{key:"resume",value:function(t){"paused"===this._status&&(t&&(this.interval=t),this._timeout=setInterval(this._tick,this._interval),this._restartTime=Date.now())}},{key:"_setStatus",value:function(t){if(t!==this._status){var e=this._status;this._status=t,this.emit("status-change",{status:t,prevStatus:e})}}},{key:"interval",get:function(){return this._interval},set:function(t){t<=0||(this._interval=t,void 0!==this._timeout&&(clearInterval(this._timeout),this._timeout=setInterval(this._tick,this._interval)))}},{key:"maxTime",get:function(){return this._maxTime},set:function(t){"number"===typeof t&&t<=this._interval||(this._maxTime=t)}},{key:"time",get:function(){return this._time}},{key:"timeFlags",get:function(){return Object(N.a)(this._timeFlags)}},{key:"startTime",get:function(){return this._startTime}},{key:"restartTime",get:function(){return this._restartTime}},{key:"status",get:function(){return this._status}}]),e}(g.a);var w=function(t){function e(t){var a;return Object(b.a)(this,e),(a=Object(v.a)(this,Object(f.a)(e).call(this)))._rowNum=10,a._colNum=10,a._bombNum=10,a._status="pending",a._markNum=0,a._facecadeNum=0,a._stepNum=0,a._time=0,a._bombArray=[],a._bombNumArray=[],a._itemStatusArray=[],a._stopwatch=new y,a._handleTick=function(t){a._time=t.time,a.emit("change",void 0),a.emit("stopwatch-tick",t)},a._stopwatch.on("tick",a._handleTick),a.reset(t),a}return Object(k.a)(e,t),Object(p.a)(e,[{key:"reset",value:function(t){t&&(this.props=t),this._status="pending",this._markNum=0,this._facecadeNum=0,this._stepNum=0,this._time=0,this._bombArray=[],this._bombNumArray=[],this._itemStatusArray=[],this._stopwatch.stop(),this.emit("change",void 0)}},{key:"flip",value:function(t,e){if("ongoing"===this._status){var a=this.rowNum,i=this.colNum,s=this.bombNum,n=t*i+e;"pending"===this._itemStatusArray[n]&&(this._stepNum+=1,this._bombArray[n]&&(this._status="failed",this._itemStatusArray[n]="detonated",this._stopwatch.stop()),this._spread(t,e),this._facecadeNum===a*i-s&&(this._status="completed",this._stopwatch.stop()),this._itemStatusArray=Object(N.a)(this._itemStatusArray),this.emit("change",void 0))}else"pending"===this._status&&this._start(t,e)}},{key:"mark",value:function(t,e){if("ongoing"===this._status){var a=this.colNum,i=this.itemStatusArray,s=t*a+e;if("pending"===i[s])i[s]="marked",this._markNum+=1;else{if("marked"!==i[s])return;i[s]="pending",this._markNum-=1}this._itemStatusArray=Object(N.a)(this._itemStatusArray),this.emit("change",void 0)}}},{key:"_spread",value:function(t,e){var a=this.rowNum,i=this.colNum,s=this.bombArray,n=this.itemStatusArray,r=this.bombNumArray,o=t*i+e;s[o]||"flipped"===n[o]||(this._markNum+="marked"===n[o]?-1:0,this._facecadeNum+=1,n[o]="flipped",0===r[o]&&(t>0&&e>0&&this._spread(t-1,e-1),t>0&&this._spread(t-1,e),t>0&&e<i-1&&this._spread(t-1,e+1),e>0&&this._spread(t,e-1),e<i-1&&this._spread(t,e+1),t<a-1&&e>0&&this._spread(t+1,e-1),t<a-1&&this._spread(t+1,e),t<a-1&&e<i-1&&this._spread(t+1,e+1)))}},{key:"_start",value:function(t,e){for(var a=this.rowNum,i=this.colNum,s=function(t){for(var e=t.rowNum,a=t.colNum,i=t.bombNum,s=t.row,n=t.col,r=e*a,o=[],m=0;m<r;++m)m<i?o.push(!0):o.push(!1);for(var u=0;u<r;++u){var c=Math.floor(Math.random()*(r-1)),h=o[u];o[u]=o[c],o[c]=h}for(var l=s*a+n,_=l;_!==l-1;++_){if(!o[_]){o[_]=!0,o[l]=!1;break}_>=r-1&&(_=-1)}return o}({rowNum:a,colNum:i,bombNum:this.bombNum,row:t,col:e}),n=[],r=[],o=0;o<this._rowNum;++o)for(var m=0;m<this._colNum;++m){var u=o*this._colNum+m;n[u]="pending";var c=0;o>0&&m>0&&(c+=s[(o-1)*i+m-1]?1:0),o>0&&(c+=s[(o-1)*i+m]?1:0),o>0&&m<i-1&&(c+=s[(o-1)*i+m+1]?1:0),m>0&&(c+=s[o*i+m-1]?1:0),m<i-1&&(c+=s[o*i+m+1]?1:0),o<a-1&&m>0&&(c+=s[(o+1)*i+m-1]?1:0),o<a-1&&(c+=s[(o+1)*i+m]?1:0),o<a-1&&m<i-1&&(c+=s[(o+1)*i+m+1]?1:0),r[u]=c}this._status="ongoing",this._bombArray=s,this._itemStatusArray=n,this._bombNumArray=r,this._stopwatch.start(),this.flip(t,e)}},{key:"rowNum",get:function(){return this._rowNum}},{key:"colNum",get:function(){return this._colNum}},{key:"bombNum",get:function(){return this._bombNum}},{key:"status",get:function(){return this._status}},{key:"markNum",get:function(){return this._markNum}},{key:"facecadeNum",get:function(){return this._facecadeNum}},{key:"stepNum",get:function(){return this._stepNum}},{key:"time",get:function(){return this._time}},{key:"bombArray",get:function(){return this._bombArray}},{key:"bombNumArray",get:function(){return this._bombNumArray}},{key:"itemStatusArray",get:function(){return this._itemStatusArray}},{key:"props",get:function(){return{rowNum:this._rowNum,colNum:this._colNum,bombNum:this._bombNum}},set:function(t){var e=Math.floor(t.rowNum),a=Math.floor(t.colNum),i=Math.floor(t.bombNum);if(e<=0||a<=0||i<=0||i>e*a)throw new Error("invalid game props");this._rowNum=e,this._colNum=a,this._bombNum=i,this.reset()}}]),e}(g.a),j=a(13),E="minesweeper",M=["","1\ufe0f\u20e3","2\ufe0f\u20e3","3\ufe0f\u20e3","4\ufe0f\u20e3","5\ufe0f\u20e3","6\ufe0f\u20e3","7\ufe0f\u20e3","8\ufe0f\u20e3"],O=function(t){var e=t.status,a=t.isScared,n=t.smiley,r=t.happy,o=t.sad,m=t.scared,u=t.calm,c=t.onClick,h=Object(i.useState)(!1),l=Object(j.a)(h,2),_=l[0],b=l[1],p=n;return _?p=u:a?p=m:"failed"===e?p=o:"completed"===e&&(p=r),s.a.createElement("div",{className:"".concat(E,"__header"),onClick:c,onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)}},s.a.createElement(d,{isTwemoji:!0},p))},T=a(14),S=Object(o.a)({isBomb:!1,bombNum:0,status:"pending"}),A=Object(o.b)(S),x=function(t){var e=A(t),a=e.isBomb,i=e.bombNum,n=e.status,r=e.back,o=e.blank,m=e.mark,u=e.bomb,c=e.boom,h=e.onMouseUp,l=e.onContextMenu,_=e.onMouseEnter,b=e.onMouseLeave,p=Object(T.a)({},M,{0:o});return console.log(n),s.a.createElement("span",{className:"".concat(E,"__block ").concat(E,"__block--").concat(n),onMouseUp:h,onContextMenu:l,onMouseEnter:_,onMouseLeave:b},s.a.createElement(d,{isTwemoji:!0},"pending"===n?r:"marked"===n?m:"detonated"===n?c:a?u:p[i]))};x.defaultProps=S;var C=x,B=function(){},P=Object(o.a)({onMouseUp:B,onContextMenu:B,onMouseEnter:B,onMouseLeave:B}),F=Object(o.b)(P),U=function(t){function e(){return Object(b.a)(this,e),Object(v.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(k.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){for(var t=this.innerProps,e=t.rowNum,a=t.colNum,i=t.status,n=t.bombArray,r=t.bombNumArray,o=t.itemStatusArray,m=t.back,u=t.blank,c=t.mark,h=t.bomb,l=t.boom,_=t.onMouseUp,d=t.onContextMenu,b=t.onMouseEnter,p=t.onMouseLeave,v=[],f=0;f<e;++f){for(var k=[],N=0;N<a;++N){var g=f*a+N,y=n[g],w=r[g],j=o[g];"completed"===i?j=y?"marked":"flipped":"failed"===i&&"detonated"!==j&&(j="flipped"),k.push(s.a.createElement(C,{key:"".concat(f,"-").concat(N),isBomb:y,bombNum:w,status:j,back:m,blank:u,mark:c,bomb:h,boom:l,onMouseUp:_.bind(void 0,f,N),onContextMenu:d.bind(void 0,f,N),onMouseEnter:b.bind(void 0,f,N),onMouseLeave:p.bind(void 0,f,N)}))}v.push(s.a.createElement("div",{key:"".concat(f),className:"".concat(E,"__row")},k))}return s.a.createElement("div",{className:"".concat(E,"__grid")},v)}},{key:"innerProps",get:function(){return F(this.props)}}]),e}(i.PureComponent);U.defaultProps=P;var L=function(t){var e=t.bombNum,a=t.markNum,i=t.stepNum,n=t.time;return s.a.createElement("div",{className:"".concat(E,"__footer")},s.a.createElement("div",{className:"".concat(E,"__bomb-counter")},s.a.createElement("span",null,e-a," / ",e),s.a.createElement("span",null,"BOMBS")),s.a.createElement("div",{className:"".concat(E,"__step-counter")},s.a.createElement("span",null,i),s.a.createElement("span",null,"STEPS")),s.a.createElement("div",{className:"".concat(E,"__time-counter")},s.a.createElement("span",null,(n/1e3).toFixed(3)),s.a.createElement("span",null,"TIME")))},I=Object(o.a)({back:"\u2b1c",blank:"\u25fb\ufe0f",mark:"\ud83d\udea9",bomb:"\ud83d\udca3",boom:"\ud83d\udca5",smiley:"\ud83d\ude00",happy:"\ud83d\ude0e",sad:"\ud83d\ude35",scared:"\ud83d\ude2c",calm:"\ud83d\ude36"}),D=Object(o.b)(I),z=function(t){function e(t){var a;return Object(b.a)(this,e),(a=Object(v.a)(this,Object(f.a)(e).call(this,t))).game=new w,a.handleChange=function(){a.setState({isScared:!1}),a.forceUpdate()},a.handleHeaderClick=function(){a.game.reset()},a.handleContextMenu=function(t){t.preventDefault()},a.handleBlockMouseUp=function(t,e,i){0===i.button&&a.game.flip(t,e)},a.handleBlockContextMenu=function(t,e,i){a.game.mark(t,e)},a.handleBlockMouseEnter=function(t,e,i){var s=a.game,n=s.colNum,r=s.status,o=s.itemStatusArray;a.setState({isScared:"pending"===r||"ongoing"===r&&"pending"===o[t*n+e]})},a.handleBlockMouseLeave=function(t,e,i){a.setState({isScared:!1})},a.state={isScared:!1},a.game.on("change",a.handleChange),a}return Object(k.a)(e,t),Object(p.a)(e,[{key:"renderHeader",value:function(){var t=this.innerProps,e=t.smiley,a=t.happy,i=t.sad,n=t.scared,r=t.calm;return s.a.createElement(O,{status:this.game.status,isScared:this.state.isScared,smiley:e,happy:a,sad:i,scared:n,calm:r,onClick:this.handleHeaderClick})}},{key:"renderGrid",value:function(){var t=this.innerProps,e=t.back,a=t.blank,i=t.mark,n=t.bomb,r=t.boom,o=this.game,m=o.rowNum,u=o.colNum,c=o.status,h=o.bombArray,l=o.bombNumArray,_=o.itemStatusArray;return s.a.createElement(U,{rowNum:m,colNum:u,status:c,bombArray:h,bombNumArray:l,itemStatusArray:_,back:e,blank:a,mark:i,bomb:n,boom:r,onMouseUp:this.handleBlockMouseUp,onContextMenu:this.handleBlockContextMenu,onMouseEnter:this.handleBlockMouseEnter,onMouseLeave:this.handleBlockMouseLeave})}},{key:"renderFooter",value:function(){var t=this.game,e=t.bombNum,a=t.markNum,i=t.stepNum,n=t.time;return s.a.createElement(L,{bombNum:e,markNum:a,stepNum:i,time:n})}},{key:"render",value:function(){var t=this.game.status;return s.a.createElement("div",{className:"".concat(E," ").concat(E,"--").concat(t),onContextMenu:this.handleContextMenu},this.renderHeader(),this.renderGrid(),this.renderFooter())}},{key:"innerProps",get:function(){return D(this.props)}}]),e}(i.Component);z.defaultProps=I;a(23);var H=z,G=function(){return s.a.createElement("div",{className:"app"},s.a.createElement("div",{className:"app__content"},s.a.createElement(H,null)),s.a.createElement("div",{className:"app__footer"},s.a.createElement("a",{href:"https://github.com/rickkky/emoji-minesweeper--react",rel:"noopener noreferrer",target:"_blank"},s.a.createElement(d,{size:20},"\ud83e\udd13"),s.a.createElement("span",null,"\xa0 SOURCE CODE \xa0"),s.a.createElement(d,{size:20},"\ud83e\udd13"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.e59c1f1c.chunk.js.map