(this["webpackJsonpemoji-minesweeper--react"]=this["webpackJsonpemoji-minesweeper--react"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){e.exports=n(23)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(5),c=n.n(r),i=(n(18),n(19),n(1)),s=n(3),l=n(6),u=n(7),m=n(11),d=n(8),p=n(12),h=n(2),b=(n(20),n(21),n(10)),f=n(9),k=(n(22),Object(h.a)({classBlock:"ric-checkbox",defaultChecked:!1,indeterminate:!1})),v=Object(h.c)(k),N=function(e){var t,n=v(e),r=n.id,c=n.className,l=n.classBlock,u=n.style,m=n.role,d=n.name,p=n.defaultChecked,h=n.checked,k=n.indeterminate,N=n.disabled,M=n.autoFocus,g=n.inputRef,w=n.children,E=n.onChange,_=n.onClick,j=n.onFocus,y=n.onBlur,F=Object(a.useState)(!!k||("boolean"===typeof h?h:p)),O=Object(b.a)(F,2),B=O[0],C=O[1],P=!!k||("boolean"===typeof h?h:B),x=Object(f.a)(c||"","".concat(l),(t={},Object(i.a)(t,"".concat(l,"--checked"),P),Object(i.a)(t,"".concat(l,"--indeterminate"),k),Object(i.a)(t,"".concat(l,"--disabled"),!!N),t)).join(" ");return o.a.createElement("span",{className:x,style:u},o.a.createElement("input",{ref:g,id:r,className:"".concat(l,"__input"),name:d,type:"checkbox",checked:P,disabled:N,autoFocus:M,role:m,onChange:function(t){N||("boolean"!==typeof h&&C(t.target.checked),E&&E({target:Object(s.a)({},v(e),{checked:t.target.checked}),nativeEvent:t.nativeEvent,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}}))},onClick:_,onFocus:j,onBlur:y}),o.a.createElement("span",{className:"".concat(l,"__inner")},w))};N.defaultProps=k;var M=N,g=Object(h.a)({isMarked:!1,isFlipped:!1}),w=Object(h.b)(g),E=function(e){var t=w(e),n=t.isFlipped,a=t.isMarked,r=t.back,c=t.front,i=t.mark,s=t.onMouseUp,l=t.onContextMenu,u=t.onMouseEnter,m=t.onMouseLeave;return o.a.createElement("span",{className:"mine-sweeper__block",onMouseUp:s,onContextMenu:l,onMouseEnter:u,onMouseLeave:m},o.a.createElement(M,{classBlock:"mine-sweeper__checkbox",indeterminate:a,checked:n},a?i:n?c:r))};E.defaultProps=g;var _=E;function j(e,t,n){if(e=Math.floor(e),t=Math.floor(t),n=Math.floor(n),e<=0||t<=0||n<=0||n>e*t)throw new Error("invalid game params");for(var a=function(e,t,n){for(var a=e*t,o=[],r=0;r<a;++r)r<n?o.push(!0):o.push(!1);return function(e){for(var t=e.length,n=0;n<e.length;++n){var a=Math.floor(Math.random()*(t-1)),o=e[n];e[n]=e[a],e[a]=o}}(o),o}(e,t,n),o=[],r=0;r<e;++r)for(var c=0;c<t;++c){var i=r*t+c;if(a[i])o[i]={type:-1,isMarked:!1,isFlipped:!1};else{var s=0;r>0&&c>0&&(s+=a[(r-1)*t+c-1]?1:0),r>0&&(s+=a[(r-1)*t+c]?1:0),r>0&&c<t-1&&(s+=a[(r-1)*t+c+1]?1:0),c>0&&(s+=a[r*t+c-1]?1:0),c<t-1&&(s+=a[r*t+c+1]?1:0),r<e-1&&c>0&&(s+=a[(r+1)*t+c-1]?1:0),r<e-1&&(s+=a[(r+1)*t+c]?1:0),r<e-1&&c<t-1&&(s+=a[(r+1)*t+c+1]?1:0),o[i]={type:s,isMarked:!1,isFlipped:!1}}}return{rowNum:e,colNum:t,bombNum:n,bombMap:a,blockMap:o,flippedNum:0,markedNum:0,stepNum:0,status:"ongoing"}}var y=Object(h.a)({back:"\u2b1c",blank:"\u25fb\ufe0f",mark:"\ud83d\udea9",bomb:"\ud83d\udca3",boom:"\ud83d\udca5",ongoing:"\ud83d\ude00",completed:"\ud83d\ude0e",failed:"\ud83d\ude35",frightened:"\ud83d\ude2c",hovered:"\ud83d\ude33",rowNum:10,colNum:10,bombNum:10}),F=Object(h.b)(y),O=["","1\ufe0f\u20e3","2\ufe0f\u20e3","3\ufe0f\u20e3","4\ufe0f\u20e3","5\ufe0f\u20e3","6\ufe0f\u20e3","7\ufe0f\u20e3","8\ufe0f\u20e3"],B=function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleInit=function(e,t,a){n.setState({game:j(e,t,a)})},n.handleBlockMouseUp=function(e,t,a){var o=n.state.game,r=o.rowNum,c=o.colNum,i=o.bombNum,s=o.blockMap[e*c+t];if("ongoing"===o.status&&!s.isFlipped&&!s.isMarked&&(n.setState({isFrigthened:!1}),0===a.button)){if(o.stepNum+=1,-1===s.type)return s.type=-2,o.status="failed",void n.forceUpdate();!function e(t,n,a){var o=a.rowNum,r=a.colNum,c=a.blockMap[t*r+n];c.isFlipped||-1===c.type||(c.isFlipped=!0,a.flippedNum+=1,c.isMarked&&(c.isMarked=!1,a.markedNum-=1),0===c.type&&(t>0&&n>0&&e(t-1,n-1,a),t>0&&e(t-1,n,a),t>0&&n<r-1&&e(t-1,n+1,a),n>0&&e(t,n-1,a),n<r-1&&e(t,n+1,a),t<o-1&&n>0&&e(t+1,n-1,a),t<o-1&&e(t+1,n,a),t<o-1&&n<r-1&&e(t+1,n+1,a)))}(e,t,o),o.flippedNum===r*c-i&&(o.status="completed"),n.forceUpdate()}},n.handleBlockContextMenu=function(e,t,a){var o=n.state.game,r=o.colNum,c=o.blockMap[e*r+t];"ongoing"!==o.status||c.isFlipped||(c.isMarked=!c.isMarked,o.markedNum+=c.isMarked?1:-1,n.forceUpdate())},n.handleBlockMouseEnter=function(e,t,a){var o=n.state.game,r=o.colNum,c=o.blockMap[e*r+t];c.isFlipped||c.isMarked||n.setState({isFrigthened:!0})},n.handleBlockMouseLeave=function(e,t,a){n.setState({isFrigthened:!1})};var a=F(e),o=a.rowNum,r=a.colNum,c=a.bombNum;return n.state={game:j(o,r,c),isFrigthened:!1},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t){var n=this.innerProps,a=n.rowNum,o=n.colNum,r=n.bombNum,c=F(e),i=c.rowNum,s=c.colNum,l=c.bombNum;a===i&&o===s&&r===l||this.handleInit(a,o,r)}},{key:"renderHeader",value:function(){var e=this,t=this.state,n=t.game,a=t.isFrigthened,r=n.status,c=this.innerProps,i=c.rowNum,s=c.colNum,l=c.bombNum,u=c.ongoing,m=c.completed,d=c.failed,p=c.frightened,h=c.hovered,b="";return"completed"===r?b=m:"failed"===r?b=d:(b=u,a&&(b=p)),o.a.createElement("div",{className:"".concat("mine-sweeper","__header"),onClick:function(){return e.handleInit(i,s,l)}},o.a.createElement("span",{className:"".concat("mine-sweeper","__status")},b),o.a.createElement("span",{className:"".concat("mine-sweeper","__status ").concat("mine-sweeper","__status--hovered")},h))}},{key:"renderGrid",value:function(){for(var e,t=this.state.game,n=t.blockMap,a=t.status,r=this.innerProps,c=r.rowNum,l=r.colNum,u=r.bomb,m=r.blank,d=r.back,p=r.mark,h=r.boom,b=Object(s.a)({},O,(e={},Object(i.a)(e,-2,h),Object(i.a)(e,-1,u),Object(i.a)(e,0,m),e)),f="ongoing"!==a,k=[],v=0;v<=c-1;++v){for(var N=[],M=0;M<=l-1;++M){var g=n[v*l+M];f&&(g.isFlipped=!0,"failed"===a?g.isMarked=!1:-1===g.type&&(g.isMarked=!0)),N.push(o.a.createElement(_,{key:"".concat(v,"-").concat(M),back:d,front:b[g.type],mark:p,isMarked:g.isMarked,isFlipped:g.isFlipped,onMouseUp:this.handleBlockMouseUp.bind(this,v,M),onContextMenu:this.handleBlockContextMenu.bind(this,v,M),onMouseEnter:this.handleBlockMouseEnter.bind(this,v,M),onMouseLeave:this.handleBlockMouseLeave.bind(this,v,M)}))}k.push(o.a.createElement("div",{key:"".concat(v),className:"".concat("mine-sweeper","__row")},N))}return o.a.createElement("div",{className:"".concat("mine-sweeper","__grid")},k)}},{key:"renderFooter",value:function(){var e=this.state.game,t=e.markedNum,n=e.stepNum,a=this.innerProps.bombNum;return o.a.createElement("div",{className:"".concat("mine-sweeper","__footer")},o.a.createElement("div",{className:"".concat("mine-sweeper","__bomb-counter")},o.a.createElement("span",null,a-t," / ",a),o.a.createElement("span",null,"BOMBS")),o.a.createElement("div",{className:"".concat("mine-sweeper","__step-counter")},o.a.createElement("span",null,n),o.a.createElement("span",null,"STEPS")))}},{key:"render",value:function(){return o.a.createElement("div",{className:"".concat("mine-sweeper"),onContextMenu:function(e){return e.preventDefault()}},this.renderHeader(),this.renderGrid(),this.renderFooter())}},{key:"innerProps",get:function(){return F(this.props)}}]),t}(a.Component);B.defaultProps=y;var C=function(){return o.a.createElement("div",{className:"app"},o.a.createElement(B,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[13,1,2]]]);
//# sourceMappingURL=main.43effe91.chunk.js.map